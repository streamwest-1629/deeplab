name: Update submodules
on:
  schedule:
    - cron: 0 15 * * 6
  workflow_dispatch:
jobs:
  private:
    name: Update private submodule
    runs-on: ubuntu-22.04
    steps:
      - name: Check out
        uses: actions/checkout@v3
      - name: Update
        run: |
          git submodule deinit -f private
          git submodule update --init --recursive
      - name: Set current datetime as env variable
        env:
          TZ: 'Asia/Tokyo'
        run: echo "CURRENT_DATETIME=$(date +'%Y-%m-%d')" >> $GITHUB_ENV
      - name: Commit and Push
        uses: actions-js/push@v1.3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          message: "[BOT] update submodule at ${{ env.CURRENT_DATETIME }}"
          branch: ${{ github.ref_name }}